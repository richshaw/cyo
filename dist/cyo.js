!function(){"use strict";function e(){}angular.module("cyo",[]),angular.module("cyo").run(e),e.$inject=[]}(),function(){"use strict";function e(){}angular.module("cyo").config(e).constant("CONFIG",{}),e.$inject=[]}(),function(){"use strict";function e(){return{restrict:"EA",controller:"choiceController"}}angular.module("cyo").directive("choice",e),e.$inject=[]}(),function(){"use strict";function e(e,n,t){var o;o=n.hasOwnProperty("choice")?n.choice:n.hasOwnProperty("name")?n.name:n.$attr[Object.keys(n.$attr)[0]],angular.element(t).on("click",function(){e.completedPages.push(e.pageName),e.decisions.push(o),e.$apply()}),e.$watch("pages",function(){-1==e.pages.indexOf(o)&&(console.error("A choice has no corresponding page,",o),t.css("border","2px solid red"),t.css("pointer-events","none"))},!0),e.$watch("completedPages",function(){e.completedPages.indexOf(e.pageName)>-1?t.css("display","none"):t.css("display","inline-block")},!0)}angular.module("cyo").controller("choiceController",e),e.$inject=["$scope","$attrs","$element"]}(),function(){"use strict";function e(){return{restrict:"EA",controller:"conditionController"}}angular.module("cyo").directive("condition",e),e.$inject=[]}(),function(){"use strict";function e(e,n,t){function o(){i||(i=!0,e.storyEvents.indexOf(c)>-1&&!r?(e.conditionValid=!0,t.css("display","block")):-1==e.storyEvents.indexOf(c)&&r&&(e.conditionValid=!0,t.css("display","block")))}t.css("display","none");var c;c=n.hasOwnProperty("condition")?n.condition:n.hasOwnProperty("name")?n.name:n.$attr[Object.keys(n.$attr)[0]];var r=!1,i=!1;e.isCondition=!0,(n.hasOwnProperty("unless")||n.hasOwnProperty("not"))&&(r=!0),e.$watch("decisions",function(){e.decisions.indexOf(e.pageName)>-1?o():(i=!1,t.css("display","none"))},!0)}angular.module("cyo").controller("conditionController",e),e.$inject=["$scope","$attrs","$element"]}(),function(){"use strict";function e(){return{restrict:"EA",controller:"eventController"}}angular.module("cyo").directive("event",e),e.$inject=[]}(),function(){"use strict";function e(e,n,t){function o(){if(!i&&(i=!0,!e.isCondition||e.conditionValid))if(console.info("Activating this event",c,!r),r){var n=e.storyEvents.indexOf(c);e.storyEvents.splice(n,1)}else e.storyEvents.push(c)}var c;c=n.hasOwnProperty("event")?n.event:n.hasOwnProperty("name")?n.name:n.$attr[Object.keys(n.$attr)[0]];var r=!1;"clear"===c&&(r=!0,c.shift());var i=!1;e.$watch("decisions",function(){e.decisions.indexOf(e.pageName)>-1?o():i=!1},!0)}angular.module("cyo").controller("eventController",e),e.$inject=["$scope","$attrs","$element"]}(),function(){"use strict";function e(e,n,t){function o(o,c,r,i){if(r.hasOwnProperty("src")){var s=e.getTrustedResourceUrl(r.src);n(s).then(function(e){c.html(e),t(c.contents())(o)},function(){})}}return{restrict:"EA",scope:!0,controller:"pageController",link:o}}angular.module("cyo").directive("page",e),e.$inject=["$sce","$templateRequest","$compile"]}(),function(){"use strict";function e(e,n,t){e.pages.length?t.css("display","none"):e.isFirstPage=!0,n.hasOwnProperty("page")?e.pageName=n.page:n.hasOwnProperty("name")?e.pageName=n.name:e.pageName=n.$attr[Object.keys(n.$attr)[0]],e.pages.push(e.pageName),e.$watch("decisions",function(){e.decisions.indexOf(e.pageName)>-1?t.css("display",""):e.isFirstPage||t.css("display","none")},!0)}angular.module("cyo").controller("pageController",e),e.$inject=["$scope","$attrs","$element"]}(),function(){"use strict";function e(){return{restrict:"EA",scope:!0,controller:"restartController"}}angular.module("cyo").directive("restart",e),e.$inject=[]}(),function(){"use strict";function e(e,n,t){angular.element(t).on("click",function(){[e.storyEvents,e.decisions,e.completedPages].forEach(function(e){for(;e.length>0;)e.pop()}),e.$apply()})}angular.module("cyo").controller("restartController",e),e.$inject=["$scope","$attrs","$element"]}(),function(){"use strict";function e(){return{restrict:"EA",scope:!0,controller:"storyController"}}angular.module("cyo").directive("story",e),e.$inject=[]}(),function(){"use strict";function e(e,n,t){e.storyEvents=[],e.choices=[],e.pages=[],e.completedPages=[],e.decisions=["intro"]}angular.module("cyo").controller("storyController",e),e.$inject=["$scope","$attrs","$element"]}();
//# sourceMappingURL=cyo.js.map
